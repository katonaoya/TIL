# chapter3 タスク管理アプリケーションを作ろう

## 3-1アプリケーション作成の準備をしよう
### まずrails newでアプリケーションの雛形を作成する。  
```
rails new taskleaf  
=> railsコマンドでアプリケーションの雛形と自動で作成してくれる。
```
**このとき起こったエラー**  
chapter2でRailsとRubyのバージョンの指定があったが、Railsのみバージョンを設定していたため、Rubyのバージョンが新しすぎてしまったせいでrails newで作成されるファイルが少なくなってしまっていた。  
  
**解決方法**  
改めて書籍のRubyバージョンを確認し、設定し直すことで解決することができた。  
  
### rails serverを起動して、サーバーが動くかを確認する。  
rails serverを起動する前に、データベースを作成する必要がある。  
```
rails db:create  
=> データベースを作成するrailsコマンド  
```
```
rails s  
=> rails serverを立ち上げるrailsコマンド
```
rails serverを起動したら、ブラウザで http://localhost:3000 にアクセスして、サーバーが立ち上がっているかを確認する。  
### slimの導入
今まで自分が学んできた教材では、ERBというテンプレートエンジンを利用していた。ERBではHTMLの中にRubyのコードを埋め込んでいくといった開発手法で、行われていた。そのため、閉じタグを毎度書かなければいけないという煩わしさがあった。  
slimを利用して、注意しなければならないのが、インデントに意味が出てくるということである。ERBであれば、インデントは開発者がコードを分かりやすくみるためにつけていたものであったため、インデントがうまくいっていなくても、見づらさはあったもののエラーが怒ることはなかった。しかし、slimではインデントで、親タグの下にあることを表しているため、インデントの位置で表示が変わってしまったり、エラーが起きてしまう。この書籍にはslimの詳しい説明は乗っていないが、検索すればコードの意味や構造がすぐに見つかるので、わからなかったら調べてみる。今までと書き方が変わってくるが、慣れていけばかなり使いやすいものであると感じる。  
  
**ERB**  
```
<html>  
  <body>  
    <h1><%= @title %></h1>  
    <p>この画面では、見出しを動的に出力することができます。</p>  
  </html>  
</body>
```
**slim**
```
html
  body
    h1= @title
    p この画面では、見出しを動的に出力することができます
```
**slimに必要なgem**
```
gem 'slim-rails'
gem 'html2slim'

=>以上ふたつをbundleでインストール
```
### Bootstrapの導入
今回のような、デザインよりも開発することを重視したいときなどに、ある程度の見栄えを簡単に整えたいときに利用するのがBootstrap。HTMLのclassを参照し、自動でCSSをつけてくれるもの。
```
1.app-title.navbar.navbar-expand-md.navbar-light.bg-light
2  .navbar-brand Taskleaf
3.container
4  = yield

1  =>アプリのタイトル.ナビバーである.※navbar-expand-md.ナビバーの明るさ.背景色
※画面が狭い時はナビゲーションアイコンとして、画面が広い時はナビゲーションバー上にメニューを展開して表示します。
2=>リンクがあったりする場合に分かりやすく太字にする。今回の場合はTaskleafを太字にする。
3=>yieldをBootstrapを利用するためのcontainerの中に入れる。
```
  
**Railsの翻訳機能**
Railsでコンテンツを作成する上で、コードを読み取ってボタンや表示などを自動で日本語に変えてくれるものがある。まずはデフォルトの日本語翻訳集のようなものをダウンロードして使う。後からそのファイルに翻訳を書き加えることで、翻訳の内容を追加することができる。
```
wget https://raw.githubusercontent.com/svenfuchs/rails-i18n/master/rails/locale/ja.yml -P config/locales
```
でダウンロードできる。  
  
**このとき起こったエラー**  
wgetが使えず、ダウンロードができなかった。  
  
**解決方法**  
```
brew install wget
```
でwgetを使えるようにする。

## 3-2 タスクモデルを作成する
データをデータベースに保存する際に、Rubyではモデルが必要になる。簡単にいうと、データベースが倉庫だとすると、モデルは倉庫の作業員といったイメージ。倉庫に保存するデータの中身を確認して、適切なデータ形式化の確認や、送られてきたデータを倉庫の決められた棚におくといった作業も担当している。  
  
**簡単なイメージ**  
カラム・・・倉庫内の棚  
属性名・・・商品の種類（文字列か数値かなど）  
  
**モデルの作成の仕方**
```
rails g model [モデル名] [属性名:データ型… ] [オプション]
```
### マイグレーションでデータベースの内容を変更する
データベースの構造はマイグレーションで管理をしている。マイグレーションとは、Gitのバージョン管理のように、データベースがどのように変更されてきたかといったことを管理するもの。テーブルの追加などを行うことができる。  
マイグレーションファイルの中身を変更したあと、migrateするとデータベースに変更が反映される。  
**注意**  
migrateしないと反映がされないので、マイグレーションファイルの変更とmigrateは必ずセットで行う。  
```
rails db:migrate => データベースにマイグレーションファイルの内容を反映させる。
```
## 3-3 コントローラーとビュー






